# === Core connections (required) ===
# URL of the external "Brain" service handling text ingestion.
BRAIN_URL=http://192.168.177.151:8080
# API key for the Brain service.
BRAIN_API_KEY=change-me
# Host URL of the Ollama inference endpoint.
OLLAMA_HOST=http://192.168.177.130:11434
# Model name to use on the Ollama host.
OLLAMA_MODEL=mistral-small3.2:latest
# Web endpoint of the docling-serve converter.
DOCLING_SERVE_URL=http://192.168.177.130:5001/v1/convert/file

# === Data storage (optional) ===
# Path to the SQLite database file used by scheduler and worker.
DB_PATH=DocumentDatabase/state.db

# === Brain request tuning (optional) ===
# Maximum token length per chunk sent to the Brain service.
BRAIN_CHUNK_TOKENS=400
# Token overlap between consecutive chunks.
BRAIN_OVERLAP_TOKENS=80
# Timeout (seconds) for POST /ingest/text requests to the Brain service.
BRAIN_REQUEST_TIMEOUT=120

# === Relevance scoring via Ollama (optional) ===
# Minimum relevance score to store a chunk.
RELEVANCE_THRESHOLD=0.55
# Minimum characters required for a document to be considered.
MIN_CHARS=200
# Hard cap for extracted text length; longer texts will be trimmed.
MAX_TEXT_CHARS=100000
# Chunk size (characters) passed to the relevance model.
MAX_CHARS=4000
# Overlap (characters) between relevance chunks.
OVERLAP=400
# Maximum number of chunks evaluated for relevance.
MAX_CHUNKS=200

# === OCR and PDF handling (optional) ===
# Enable OCR fallback for PDFs (requires tesseract/pytesseract/pdf2image).
ENABLE_OCR=0
# Timeout (seconds) for pdftotext execution.
PDFTOTEXT_TIMEOUT_S=60
# Maximum pages to OCR per PDF (0 = no limit).
PDF_OCR_MAX_PAGES=20
# DPI used when rasterizing PDFs for OCR.
PDF_OCR_DPI=300

# === Logging and debug controls (optional) ===
# Enable structured decision logging for worker steps.
DECISION_LOG_ENABLED=1
# Maximum number of decision log entries per job.
DECISION_LOG_MAX_PER_JOB=50
# Enable verbose worker logging for troubleshooting.
DEBUG=0

# === Scheduler and worker coordination (optional) ===
# Directory with source documents (default is Nextcloud documents folder).
NEXTCLOUD_DOC_DIR=/nextcloud/documents
# Directory for extracted images managed by docling.
NEXTCLOUD_IMAGE_DIR=/nextcloud/docling-images
# Override the watched directories list (comma-separated) instead of the defaults above.
ROOT_DIRS=/nextcloud/documents,/nextcloud/docling-images
# Comma-separated glob patterns to exclude from scanning.
EXCLUDE_GLOBS=
# Follow filesystem symlinks when scanning.
FOLLOW_SYMLINKS=0
# Maximum number of jobs enqueued per scan pass.
MAX_JOBS_PER_PASS=5
# Idle wait time (seconds) between scheduler scans.
SLEEP_SECS=10
# Time (seconds) to wait for the worker to stop when shutting down.
WORKER_STOP_TIMEOUT=20
# Location of the scheduler PID file (set by brain_scan.sh at runtime).
SCAN_SCHEDULER_PID_FILE=
# Lock timeout (seconds) before a job is considered stale.
LOCK_TIMEOUT_S=600
# Sleep interval (seconds) for the worker when idle.
IDLE_SLEEP_S=1.0
# Timeout (seconds) for worker HTTP calls to docling-serve.
DOCLING_SERVE_TIMEOUT=300
